<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" []>
<chapter>
  <title>Import and export</title>
  <para>In a primary health system, the HMIS typically involves a distributed application, where the
    same application is running in different geographical locations (PHCs,CHCs, hospitals,
    districts, and state). Most of these physical locations do not have Internet connectivity, and
    hence they work offline. At some point (normally at the district level), the data needs to be
    synchronised in order to have a consolidated database for the a particular geographical region.
    For this, it is important to be able to export data from one location (which is working offline,
    say at the health facility level) to another one say at the district level where the data would
    need to be imported. This feature of exporting and importing is thus a crucial function of a
    HMIS. This feature also helps us overcome the dependency on Internet to some degree, as data
    updates can be transferred via USB key where there is no connectivity, or through email where
    there is limited Internet connectivity. DHIS 2 provides robust export-import functionality to
    fulfill these needs. </para>
  <para>To access the main Import-Export module, choose <guimenu>Services-&gt;Import-Export. </guimenu>A number of services are available, all of which will be described in detail in respective sections below. </para>
  <screenshot>
    <mediaobject>
      <imageobject>
        <imagedata align="center" fileref="resources/images/import_export/import_export_overview.png"/>
      </imageobject>
    </mediaobject>
  </screenshot>
  <section>
    <title>Meta-data import</title>
    <section>
      <title>XML Meta-data import</title>
      <para>Meta-data in the XML format known as DXF2 can be easily imported by accessing Services-&gt;Import-Export-&gt;Meta-Data import. Select the XML file by pressing &quot;Select&quot; and choose the file from your local file system. Both raw XML as well as a ZIP archive of the XML are supported.  </para>
      <screenshot>
        <screeninfo>Default import screen</screeninfo>
        <mediaobject>
          <imageobject>
            <imagedata fileref="resources/images/import_export/import_default.png" format="PNG"/>
          </imageobject>
        </mediaobject>
      </screenshot>
      <para>There are two separate options for importing data. </para>
      <itemizedlist>
        <listitem>
          <para>Dry run: This is similar to the old preview option, this will do a dry run import,
            and give you information about any errors.</para>
        </listitem>
        <listitem>
          <para>Strategy: There are three options here, &quot;New and Updates&quot;, &quot;New only&quot;, and &quot;Update
            only&quot;. New and updates tells the importer to expect both new meta-data, and updates to
            existing ones. New only will only accept fresh meta-data, usually you would use this on a
            empty database. Updates only will only allow the meta-data to match meta-data that is
            already there (same identifiers, new name etc).</para>
        </listitem>
      </itemizedlist>
      <note>
        <para><emphasis role="bold">It is highly recommend always using the Dry run option</emphasis> when importing data to make sure you keep control over any changes
            to your meta-data and databases being out of synch on data elements or orgunit
            names</para>
      </note>
      <section>
        <title>Dry run before importing</title>
        <para>Before doing the import into your database, it is highly recommended that you run the
          import with the dry run option set to true first. This will enabled you to have a look at
          how many new, updates, and ignored meta-data there will be. After you have selected your
          file, set dry run to true, you can now click the import button. After doing this, you will
          be greeted by this window.</para>
        <mediaobject>
          <imageobject>
            <imagedata fileref="resources/images/import_export/display_import_summary.png"/>
          </imageobject>
        </mediaobject>
        <para>Here you can see a short summary of what was contained in your import file. To see
          further details, please click on the &quot;display import summary&quot; link.</para>
        <mediaobject>
          <imageobject>
            <imagedata fileref="resources/images/import_export/import_summary.png"/>
          </imageobject>
        </mediaobject>
        <para>Here you can see that the import dry run was successful and the import contained
            <emphasis role="bold">1</emphasis> new organisation unit, <emphasis role="bold">1332</emphasis> updated, and <emphasis role="bold">4</emphasis> organisation unit
          levels.</para>
        <para>Below you can see another example.</para>
        <mediaobject>
          <imageobject>
            <imagedata fileref="resources/images/import_export/import_summary_conflicts.png"/>
          </imageobject>
        </mediaobject>
        <para>Here you can see that the organisation unit Nduvuibu MCHP had a unknown reference to
          an object with ID &quot;aaaU6Kr7Gtpidn&quot;, which means that an object with this ID was not
          present in your imported file, and it could not be found in the existing database. Its
          important to note that even if a reference could not be found, the object will still be
          imported, but you might have to fix this directly in DHIS 2 later, if the reference should
          have pointed to something else.</para>
      </section>
      <section>
        <title>Matching identifiers in DXF2</title>
        <para>The DXF2 format currently support matching for two identifiers, the internal DHIS2 identifier (known as a UID), and also using an  external identifier called called a &quot;code&quot;. When the importer is trying to search for
        references (like the one above), it will first go to the UID field, and then to the code
        field. This allows you to import from legacy systems without having a UID for every meta-data
        object. I.e. if you are importing facility data from a legacy system, you can leave out the
        ID field completely (DHIS 2 will fill this in for you) and the put the legacy systems own
        identifiers in the code field, this identifier is required to be unique. This not only works
        for organisation units, but for all kinds of meta-data, allowing for easy import from other
        systems.</para>
      </section>
    </section>
    <section>
      <title>Importing CSV meta-data</title>
      <para>DHIS 2 supports import of meta-data in the CSV format. Columns which are not required
        can be omitted in the CSV file, but the order will be affected. If you would like to specify
        columns which appear late in the order but not specify columns which appear early in the
        order you can include empty columns (&quot;&quot;) for them.</para>
      <para>To import CV meta-data go to import-export module and select CSV Meta-Data Import form
        the left side menu. You must select the object type which your CSV file contains. You can
        only upload one type of objects at the time. Upload your file and click update. The
        following object types are supported:</para>
      <itemizedlist>
        <listitem>
          <para>Data elements</para>
        </listitem>
        <listitem>
          <para>Data element groups</para>
        </listitem>
        <listitem>
          <para>Category options</para>
        </listitem>
        <listitem>
          <para>Category option groups</para>
        </listitem>
        <listitem>
          <para>Organisation units</para>
        </listitem>
        <listitem>
          <para>Organisation unit groups</para>
        </listitem>
        <listitem>
          <para>Validation rules</para>
        </listitem>
        <listitem>
          <para>Option sets</para>
        </listitem>
      </itemizedlist>
      <para>The formats for the currently supported object types for CSV import are listed
      below.</para>
      <table frame="all">
        <title>Data Element CSV Format</title>
        <tgroup cols="4">
          <colspec colnum="1" colname="c1" colwidth="1.33*"/>
          <colspec colnum="2" colname="c2" colwidth="1*"/>
          <colspec colnum="3" colname="newCol3" colwidth="2.06*"/>
          <colspec colnum="4" colname="c3" colwidth="5.11*"/>
          <thead>
            <row>
              <entry>Column</entry>
              <entry>Required</entry>
              <entry>Value (default first)</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>Name</entry>
              <entry>Yes</entry>
              <entry/>
              <entry>Name. Max 230 char. Unique.</entry>
            </row>
            <row>
              <entry>UID</entry>
              <entry>No</entry>
              <entry>UID</entry>
              <entry>Stable identifier. Max 11 char. Will be generated by system if not specified.</entry>
            </row>
            <row>
              <entry>Code</entry>
              <entry>No</entry>
              <entry/>
              <entry>Stable code. Max 50 char.</entry>
            </row>
            <row>
              <entry>Short name</entry>
              <entry>No</entry>
              <entry>50 first char of name</entry>
              <entry>Will fall back to first 50 characters of name if unspecified. Max 50 char. Unique.</entry>
            </row>
            <row>
              <entry>Description</entry>
              <entry>No</entry>
              <entry/>
              <entry>Free text description.</entry>
            </row>
            <row>
              <entry>Form name</entry>
              <entry>No</entry>
              <entry/>
              <entry>Max 230 char.</entry>
            </row>
            <row>
              <entry>Domain type</entry>
              <entry>No</entry>
              <entry>aggregate | patient</entry>
              <entry>Domain type for data element, can be aggreate or patient. Max 16 char.</entry>
            </row>
            <row>
              <entry>Value type</entry>
              <entry>No</entry>
              <entry>int | string | bool | trueOnly | date | unitInterval</entry>
              <entry>Value type. Max 16 char.</entry>
            </row>
            <row>
              <entry>Number type</entry>
              <entry>No</entry>
              <entry>int | posInt | negInt | number | zeroPositiveInt</entry>
              <entry>Only relevant if type is int. Max 16 char.</entry>
            </row>
            <row>
              <entry>Text type</entry>
              <entry>No</entry>
              <entry>text | longText</entry>
              <entry>Only relevant if type is string. Max 16 char.</entry>
            </row>
            <row>
              <entry>Aggregation operator</entry>
              <entry>No</entry>
              <entry>sum | average | count | stddev | variance</entry>
              <entry>Operator indicating how to aggreate data in the time dimension. Max 16 char.</entry>
            </row>
            <row>
              <entry>Category combination UID</entry>
              <entry>No</entry>
              <entry>UID</entry>
              <entry>Stable identifier. Max 11 char. Will default to default category combination if
                not specified.</entry>
            </row>
            <row>
              <entry>Url</entry>
              <entry>No</entry>
              <entry/>
              <entry>URL to data element resource. Max 255 char.</entry>
            </row>
            <row>
              <entry>Zero is significant</entry>
              <entry>No</entry>
              <entry>false | true</entry>
              <entry>Indicates whether zero values will be stored for this data element.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <table frame="all">
        <title>Organisation Unit CSV Format</title>
        <tgroup cols="4">
          <colspec colnum="1" colname="c1" colwidth="1.33*"/>
          <colspec colnum="2" colname="c2" colwidth="1*"/>
          <colspec colnum="3" colname="c3" colwidth="2.05*"/>
          <colspec colnum="4" colname="c4" colwidth="5.1*"/>
          <thead>
            <row>
              <entry>Column</entry>
              <entry>Required</entry>
              <entry>Value (default first)</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>Name</entry>
              <entry>Yes</entry>
              <entry/>
              <entry>Name. Max 230 characters. Unique.</entry>
            </row>
            <row>
              <entry>UID</entry>
              <entry>No</entry>
              <entry>UID</entry>
              <entry>Stable identifier. Max 11 char. Will be generated by system if not specified.</entry>
            </row>
            <row>
              <entry>Code</entry>
              <entry>No</entry>
              <entry/>
              <entry>Stable code. Max 50 char.</entry>
            </row>
            <row>
              <entry>Parent UID</entry>
              <entry>No</entry>
              <entry>UID</entry>
              <entry>Stable identifier. Max 11 char.</entry>
            </row>
            <row>
              <entry>Short name</entry>
              <entry>No</entry>
              <entry>50 first char of name</entry>
              <entry>Will fall back to first 50 characters of name if unspecified. Max 50 characters. Unique.</entry>
            </row>
            <row>
              <entry>Description</entry>
              <entry>No</entry>
              <entry/>
              <entry>Free text description.</entry>
            </row>
            <row>
              <entry>UUID</entry>
              <entry>No</entry>
              <entry/>
              <entry>UUID. Max 36 char.</entry>
            </row>
            <row>
              <entry>Opening date</entry>
              <entry>No</entry>
              <entry>1970-01-01</entry>
              <entry>Opening date of organisation unit in YYYY-MM-DD format.</entry>
            </row>
            <row>
              <entry>Closed date</entry>
              <entry>No</entry>
              <entry/>
              <entry>Closed date of organisation unit in YYYY-MM-DD format, skip if currently open.</entry>
            </row>
            <row>
              <entry>Comment</entry>
              <entry>No</entry>
              <entry/>
              <entry>Free text comment for organisation unit.</entry>
            </row>
            <row>
              <entry>Feature type</entry>
              <entry>No</entry>
              <entry/>
              <entry>Can be Point, Polygon, MultiPolygon. Max 50 char.</entry>
            </row>
            <row>
              <entry>Coordinates</entry>
              <entry>No</entry>
              <entry/>
              <entry>Coordinates used for geospatial analysis in Geo JSON format.</entry>
            </row>
            <row>
              <entry>URL</entry>
              <entry>No</entry>
              <entry/>
              <entry>URL to organisation unit resource. Max 255 char.</entry>
            </row>
            <row>
              <entry>Contact person</entry>
              <entry>No</entry>
              <entry/>
              <entry>Contact person for organisation unit. Max 255 char.</entry>
            </row>
            <row>
              <entry>Address</entry>
              <entry>No</entry>
              <entry/>
              <entry>Address for organisation unit. Max 255 char.</entry>
            </row>
            <row>
              <entry>Email</entry>
              <entry>No</entry>
              <entry/>
              <entry>Email for organisation unit. Max 150 char.</entry>
            </row>
            <row>
              <entry>Phone number</entry>
              <entry>No</entry>
              <entry/>
              <entry>Phone number for organisation unit. Max 150 char.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <table frame="all">
        <title>Validation Rule CSV Format</title>
        <tgroup cols="4">
          <colspec colname="c1" colnum="1" colwidth="2.37*"/>
          <colspec colname="c2" colnum="2" colwidth="1*"/>
          <colspec colname="c3" colnum="3" colwidth="3.84*"/>
          <colspec colname="c4" colnum="4" colwidth="6.29*"/>
          <thead>
            <row>
              <entry>Column</entry>
              <entry>Required</entry>
              <entry>Value (default first)</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>Name</entry>
              <entry>Yes</entry>
              <entry/>
              <entry>Name. Max 230 characters. Unique.</entry>
            </row>
            <row>
              <entry>UID</entry>
              <entry>No</entry>
              <entry>UID</entry>
              <entry>Stable identifier. Max 11 char. Will be generated by system if not
                specified.</entry>
            </row>
            <row>
              <entry>Code</entry>
              <entry>No</entry>
              <entry/>
              <entry>Stable code. Max 50 </entry>
            </row>
            <row>
              <entry>Description</entry>
              <entry>No</entry>
              <entry/>
              <entry>Free text description.</entry>
            </row>
            <row>
              <entry>Instruction</entry>
              <entry>No</entry>
              <entry/>
              <entry>Free text instruction.</entry>
            </row>
            <row>
              <entry>Importance</entry>
              <entry>No</entry>
              <entry>medium | high | low</entry>
              <entry/>
            </row>
            <row>
              <entry>Rule type</entry>
              <entry>No</entry>
              <entry>validation | surveillance</entry>
              <entry/>
            </row>
            <row>
              <entry>Operator</entry>
              <entry>No</entry>
              <entry>equal_to | not_equal_to | greater_than | greater_than_or_equal_to | less_than |
                less_than_or_equal_to | compulsory_pair</entry>
              <entry/>
            </row>
            <row>
              <entry>Period type</entry>
              <entry>No</entry>
              <entry>Monthly | Daily | Weekly | Quarterly | SixMontly | Yearly</entry>
              <entry/>
            </row>
            <row>
              <entry>Left side expression</entry>
              <entry>Yes</entry>
              <entry/>
              <entry>Mathematical formula based on data element and option combo UIDs.</entry>
            </row>
            <row>
              <entry>Left side expression description</entry>
              <entry>Yes</entry>
              <entry/>
              <entry>Free text.</entry>
            </row>
            <row>
              <entry>Left side null if blank</entry>
              <entry>No</entry>
              <entry>false | true</entry>
              <entry>Boolean.</entry>
            </row>
            <row>
              <entry>Right side expression</entry>
              <entry>Yes</entry>
              <entry/>
              <entry>Mathematical formula based on data element and option combo UIDs.</entry>
            </row>
            <row>
              <entry>Right side expression description</entry>
              <entry>Yes</entry>
              <entry/>
              <entry>Free text.</entry>
            </row>
            <row>
              <entry>Right side null if blank</entry>
              <entry>No</entry>
              <entry>false | true</entry>
              <entry>Boolean.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <table frame="all">
        <title>Option Set CSV Format</title>
        <tgroup cols="4">
          <colspec colnum="1" colname="c1" colwidth="1.27*"/>
          <colspec colnum="2" colname="c2" colwidth="1*"/>
          <colspec colnum="3" colname="c3" colwidth="1.36*"/>
          <colspec colnum="4" colname="c4" colwidth="5.43*"/>
          <thead>
            <row>
              <entry>Column</entry>
              <entry>Required</entry>
              <entry>Value (default first)</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>Name</entry>
              <entry>Yes</entry>
              <entry/>
              <entry>Name. Max 230 characters. Unique. The option set values should be repeated for
                each option.</entry>
            </row>
            <row>
              <entry>UID</entry>
              <entry>No</entry>
              <entry>UID</entry>
              <entry>Stable identifier. Max 11 char. Will be generated by system if not
                specified.</entry>
            </row>
            <row>
              <entry>Code</entry>
              <entry>No</entry>
              <entry/>
              <entry>Stable code. Max 50 char.</entry>
            </row>
            <row>
              <entry>Option</entry>
              <entry>Yes</entry>
              <entry/>
              <entry>Option. Free text. The option set values should be repeated for each
                option.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <table frame="all">
        <title>Data Element Group, Category Option, Category Option Group, Organisation Unit Group
          CSV Format</title>
        <tgroup cols="4">
          <colspec colnum="1" colname="c1" colwidth="1.33*"/>
          <colspec colnum="2" colname="c2" colwidth="1*"/>
          <colspec colnum="3" colname="c3" colwidth="1.41*"/>
          <colspec colnum="4" colname="c4" colwidth="5.59*"/>
          <thead>
            <row>
              <entry>Column</entry>
              <entry>Required</entry>
              <entry>Value (default first)</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>Name</entry>
              <entry>Yes</entry>
              <entry/>
              <entry>Name. Max 230 characters. Unique.</entry>
            </row>
            <row>
              <entry>UID</entry>
              <entry>No</entry>
              <entry>UID</entry>
              <entry>Stable identifier. Max 11 char. Will be generated by system if not
                specified.</entry>
            </row>
            <row>
              <entry>Code</entry>
              <entry>No</entry>
              <entry/>
              <entry>Stable code. Max 50 char.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <para>An example of a CSV file for data elements can be seen below. The first row will always
        be ignored. Notice how you can skip columns and rely on default values or simply leave
        columns blank:</para>
      <screen>name,uid,code,shortname,description,formname,domaintype,type,numbertype,texttype,aggregationoperator,categorycombo,url,zero
"Women participated in skill development training",,"D0001","Women participated development training"
"Women participated in community organizations",,"D0002","Women participated community organizations"</screen>
      <para>A minimal example for importing organisation units with a parent unit looks like
        this:</para>
      <screen>name,uid,code,parent
"West province",,"WESTP","ImspTQPwCqd"
"East province",,"EASTP","ImspTQPwCqd"</screen>
      <para>The format for option sets is special. One record represents an option, and the three
        first values representing the option set should be repeated for each option (record):</para>
      <screen>name,uid,code,option
"Color",,,"Blue"
"Color",,,"Green"
"Gender",,,"Female"
"Gender",,,"Male"</screen>
    </section>
    <section>
      <title>GML data import</title>
      <para>The GML import function can be used to import data prepared in the Geography Markup Language (GML). GML can be used to update the coordinates (both polygons and points). Once you have prepared your GML file as detailed in the chapter on &quot;Importing coordinates&quot;, you can load the file with this function. </para>
      <para>It is currently not possible to import an organisation unit hierarchy with GML.
        Therefore, you should create the organisation unit hierarchy separately, and then use GML to
        update the coordinates once the hierarchy has been created. </para>
      <note>
        <para>Currently, it is only possible to import GML data by matching on the name of the
          organisation unit itself. Therefore, if you have organisation units with the same name in
          your organisation unit hierarchy (e.g. two clinics with exactly the same name), you will
          need to distinguish them before importing GML. Otherwise, both organisation units may be
          updated with the same set of coordinates. </para>
      </note>
    </section>
  </section>
  <section id="import">
    <title>Importing data</title>
    <para>The import option allows different instance of DHIS 2 to receive standardised sets of data in the absence of a networked system. The functionality can also be used to import data produced by another system (perhaps on a regular basis) or to import legacy data which has been transformed into a format which DHIS2 can understand. Typically, a data set is exported from one DHIS2 instance (e.g. a district level system) to another system (e.g. a provincial level system).  DHIS 2 is also capable of importing data directly from a DHIS 1.4 Access database. Each of these options will be discussed in the following sections. </para>
    <section id="import_another_instance">
      <title>XML data import</title>
      <para>To import data in XML format, simply select Services-&gt;Import-export-&gt;XML data import. Similar options to the XML meta-data import facility are available. Refer to the section in the Web API on XML data import for details on the XML format which is used by DHIS2 for aggregate data import. </para>
    </section>
    <section id="importCSVdata">
      <title>Importing CSV data</title>
      <para>DHIS2 supports import of data in the CSV (Comma Separated Values)  format. This can be used to import exchange file produced by DHIS2 itself. It also comes in handy when you want to import data from a third-party system as CSV is widely supported in applications and is easy to produce manually.</para>
      <para>To import a CSV data exchange file navigate to the <emphasis role="italic">CSV Data Import </emphasis>item in the left-side menu. Upload the exchange file and click <emphasis role="italic">Import</emphasis>.</para>
      <para>The following section describes the CSV format used in DHIS2. The first row is assumed to be a header row and will be ignored during import.</para>
      <para><table>
          <title>CSV format of DHIS 2</title>
          <tgroup cols="3">
            <tbody>
              <row>
                <entry>Column</entry>
                <entry>Required</entry>
                <entry>Description</entry>
              </row>
              <row>
                <entry>Data element</entry>
                <entry>Yes</entry>
                <entry>Refers to ID by default, can also be name and code based on selected id
                  scheme</entry>
              </row>
              <row>
                <entry>Period</entry>
                <entry>Yes</entry>
                <entry>In ISO format</entry>
              </row>
              <row>
                <entry>Org unit</entry>
                <entry>Yes</entry>
                <entry>Refers to ID by default, can also be name and code based on selected id
                  scheme</entry>
              </row>
              <row>
                <entry>Category option combo</entry>
                <entry>No</entry>
                <entry>Refers to ID</entry>
              </row>
              <row>
                <entry>Attribute option combo</entry>
                <entry>No</entry>
                <entry>Refers to ID (from version 2.16)</entry>
              </row>
              <row>
                <entry>Value</entry>
                <entry>No</entry>
                <entry>Data value</entry>
              </row>
              <row>
                <entry>Stored by</entry>
                <entry>No</entry>
                <entry>Refers to username of user who entered the value</entry>
              </row>
              <row>
                <entry>Timestamp</entry>
                <entry>No</entry>
                <entry>Date in ISO format</entry>
              </row>
              <row>
                <entry>Comment</entry>
                <entry>No</entry>
                <entry>Free text comment</entry>
              </row>
              <row>
                <entry>Follow up</entry>
                <entry>No</entry>
                <entry>true or false</entry>
              </row>
            </tbody>
          </tgroup>
        </table></para>
      <para>The following is an example CSV file which can be imported into DHIS 2. It  can be imported both as plain text file or as compressed ZIP file archive.</para>
      <screen>"dataelement","period","orgunit","categoryoptioncombo","attributeoptioncombo","value","storedby","timestamp","comment","followup"
"DUSpd8Jq3M7","201202","gP6hn503KUX","Prlt0C1RF0s",,"7","bombali","2010-04-17",,"false"
"DUSpd8Jq3M7","201202","gP6hn503KUX","V6L425pT3A0",,"10","bombali","2010-04-17",,"false"
"DUSpd8Jq3M7","201202","OjTS752GbZE","V6L425pT3A0",,"9","bombali","2010-04-06",,"false"</screen>
    </section>
    <section>
      <title>Event data import</title>
      <para>Event data can also be easily imported with the "Event data import" function. Refer to the section in the WebAPI for more information on the format used for importing events. Otherwise, the functionality is the same as the XML data import used for aggregate data. </para>
    </section>
    <section id="importPDFdata">
      <title>Importing PDF data</title>
      <para>DHIS2 supports import of data in the PDF format. This can be used to import data produced by off-line PDF data entry forms. Please refer to the section &quot;Data set management&quot; for details on how to produce a PDF form which can be used for off-line data entry. </para>
      <para>To import a PDF data file, navigate to the <emphasis role="italic">PDF Data Import </emphasis>item in the left-side menu. Upload the completed PDF file and click <emphasis role="italic">Import</emphasis>.</para>
      <para>After the import process is finished, you can follow the link to the import summary, which will inform you about the outcome of the import process in terms of number of records imported, updated and ignored and potential conflicts.</para>
    </section>
    <section id="dhis14import">
      <title>Importing data from DHIS 1.4</title>
      <para>There are two ways to import data from a DHIS 1.4 database; 1) through the 1.4 XML-based export files, or 2) directly from the DHIS 1.4 data file (.mdb). Both are accessible from the DHIS 1.4 Import menu under Import in the Import-Export module.</para>
      <para>It is critical that all data integrity violations which are present in the DHIS 1.4
        database be fully resolved before attempting an import into DHIS2. You can check the data
        integrity of DHIS 1.4 through the CORE Module-&gt;Advanced-&gt;Data integrity checks. A
        report will be generated of all data integrity violations which should be resolved prior to
        importing into DHIS2.</para>
      <warning>
        <para>When data is imported from DHIS 1.4, both the meta-data as well as data are imported. You should therefore be exceedingly careful that the meta-data present in DHIS 1.4 is compatible with your DHIS2 data, otherwise during a DHIS 1.4 data import, the meta-data in the DHIS2 system will be potentially overwritten by the i</para>
      </warning>
      <section>
        <title>DHIS 1.4 File (database) Import</title>
        <para>This method is recommend when doing large imports from 1.4, and especially when importing into a new  DHIS2 database.</para>
        <para><emphasis role="bold">DHIS 1.4 File Configuration</emphasis> </para>
        <para>Before you can start the 1.4 file import you need to provide a  few details about the 1.4 database:</para>
        <para><emphasis role="italic">Datafile(#):</emphasis> Here you put the full path to the DHIS 1.4 data file you want to import from, e.g. C:\DHIS14\DHIS_#LR_LIBERIA.mdb. </para>
        <para><emphasis role="italic">Username:</emphasis>  Leave blank (unless you have set up extra security measures on the file)</para>
        <para><emphasis role="italic">Password:</emphasis> Leave blank (unless you have set up extra security measures on the file)</para>
        <para><emphasis role="italic">Levels:</emphasis> Provide the number of levels in the orgunit hierarchy in your 1.4 database, e.g. 5.</para>
        <para>Click &quot;Save&quot; and you will return to the DHIS 1.4 File Import window. </para>
        <para><emphasis role="bold">Import Type:</emphasis></para>
        <para>As with other imports you have the options to Import (directly), Preview, or Analyse the import. We recommend using the Analyse option first to check that the 1.4 database is OK and ready to be imported. </para>
        <para>When importing a large database into a new blank DHIS 2 database we recommend using the Import option to save time. </para>
        <para>For smaller incremental imports the Preview is OK.</para>
        <para><emphasis role="bold">Last Updated:</emphasis> </para>
        <para>If you want the full import, all the data in the 1.4 database you leave this field blank.</para>
        <para>If you only want to do an incremental import into an already existing DHIS 2 database you can use this field to filter which data values to import. Only values added or edited after the date you specify will be imported. This filter makes use of the LastUpdated column in the RoutineData table in the DHIS 1.4 data file.</para>
        <para><emphasis role="bold">Import process:</emphasis></para>
        <para>When you are done selecting Method, and LastUpdated you can begin the import by
          clicking on the Import button. This process might take a long time, depending on how many
          data values you are importing. On a reasonable spec. computer the import takes about 2
          million records per 30 minutes.</para>
      </section>
      <section>
        <title>DHIS 1.4 XML Import</title>
        <para>Import though XML data from DHIS 1.4 is also possible using the standard DHIS 1.4
          export format. Just be sure that the DHIS 1.4 export format has been set to &quot;DHIS
          2&quot; as illustrated in the screen shot below. After the data has been exported by
          DHIS 1.4, you can import the data by choosing &quot;Services-&gt;Import-Export-&gt;DHIS
          1.4 Import-&gt;DHIS 1.4 XML Import&quot; and proceeding via the procedure outline in the
            <link linkend="import_another_instance">previous section</link>. </para>
        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="resources/images/import_export/dhis14_export.png"/>
            </imageobject>
          </mediaobject>
        </screenshot>
      </section>
      <section>
        <title>Limitations to DHIS 1.4 imports</title>
        <para>Although it is possible to import and export data between instances of DHIS 1.4 and
          DHIS 2, there are significant limitations. Currently, the import of some metadata is not
          supported from DHIS 1.4 to DHIS 2. This includes:</para>
        <itemizedlist>
          <listitem>
            <para>Organisational unit alternate names</para>
          </listitem>
          <listitem>
            <para>Compulsory data element pairings</para>
          </listitem>
          <listitem>
            <para>Custom data entry forms</para>
          </listitem>
          <listitem>
            <para>Dataset data entry levels</para>
          </listitem>
        </itemizedlist>
        <para>It is also important that the aggregation operator defined in DHIS 1.4 be set to the correct value. Some data, such as population, should have their aggregation operator set to &quot;Average&quot; in DHIS2, as this controls how the aggregation of data is handled over time (but not within the organisational unit hierarchy). </para>
      </section>
    </section>
  </section>
  <section id="export">
    <title>Exporting data and meta-data</title>
    <para>DHIS2 makes it possible to export various types of data in multiple data formats. You can
      export your data, also referred to as measures or facts; and your meta-data, which refers to
      the information describing your data. Data can be exported both in raw, non-aggregated format
      and in aggregated format. It is also possible to export a combination of data and meta-data in
      case you have special requirements. This chapter covers mainly how to export data and
      meta-data through the user interface of the import-export DHIS 2 module. Data can also be
      exported programmatically through the DHIS 2 Web API, and it is useful to be aware of the
      various options available:</para>
    <itemizedlist>
      <listitem>
        <para>Export raw, non-aggregated data through the user interface: Covered in this
          chapter.</para>
      </listitem>
      <listitem>
        <para>Export aggregated data programmatically through the Web API: Please refer to the Web
          API chapter, section on Analytics.</para>
      </listitem>
      <listitem>
        <para>Export a combination of data and meta-data: Please refer to the SQL view sections in
          the Data administration chapter and Web API chapter.</para>
      </listitem>
      <listitem>
        <para>Export meta-data through the user interface: Covered in this chapter.</para>
      </listitem>
      <listitem>
        <para>Export meta-data programmatically through the Web API: Please refer to the Web API
          chapter, section on meta data.</para>
      </listitem>
    </itemizedlist>
    <para>Data can be exported on various formats, including DXF 2 (the DHIS 2 meta-data and data
      exchange format based on XML), CSV, PDF, MS Excel and the DHIS 1.4 XML format. </para>
    <para>Another aspect of data export is the type of DHIS 2 deployment. In the case of online
      deployment, all data is saved into a single database only. In an offline deployment, each
      instance will store data in a separate database in their local system. In an offline
      deployment, after the data entry is finished, data will have to be manually sent to the next
      level in the organizational hierarchy. In an on-line application this is not required, as all
      data is captured over an Internet connection and stored in a central location.</para>
    <section>
      <title>Metadata export</title>
      <para>Meta-data is &quot;data about data&quot;. In the context of DHIS 2, meta-data consists
          of definitions of data elements, indicators, the structure and names contained in the
          organizational hierarchy, and other options. Click on the &quot;Meta-data export&quot; link
          from the main &quot;Data export&quot; screen in order to access this. Just select the
          features, format, and the compression that you want and click &quot;Export&quot;. This
          metadata file can then be transmitted just like a data file, except it will contain
          information on the definitions of the various features, as opposed to the values of the
          data themselves. </para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata fileref="resources/images/import_export/metadata_export.png" format="PNG"/>
          </imageobject>
        </mediaobject>
      </screenshot>
      <para>Simply choose the objects which you would like to export, and click <guibutton>&quot;Export&quot;</guibutton>. </para>
    </section>
    <section>
      <title>Meta-data detailed export</title>
      <para>In certain implementations, it may be useful to create groups of metadata objects which should always be exported together. To access this feature, click &quot; Meta-data detailed export&quot; from the left side menu of the &quot;Import-export&quot; dialog. </para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="resources/images/import_export/metadata_detailed_export_main.png"/>
          </imageobject>
        </mediaobject>
      </screenshot>
      <para>A list of available metadata export filters will be shown. Click on the name of the filter you would like to edit and then select &quot;Edit&quot; from the context menu. An example of the dialog is shown below. </para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="resources/images/import_export/metadata_detail_export_select.png"/>
          </imageobject>
        </mediaobject>
      </screenshot>
      <para>In this example, we have created a metadata export filter, to export all &quot;Constants&quot; from the system. If any meta-data objects have been selected to be part of the filter, they will be highlighted in green. Click on the name of the objects you would like to export, and add them to the right side to be selected to be part of the export. Once you have composed the filter as needed, click &quot;Save&quot; (when editing) or &quot;Add&quot; (when adding a new metadata filter). </para>
      <para>To export the filter, click on the name from the main &quot;Meta-data detailed export&quot; menu, and choose &quot;Export&quot; from the context menu. The following dialog will appear. </para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="resources/images/import_export/metadata_detail_export_dialog.png"/>
          </imageobject>
        </mediaobject>
      </screenshot>
      <para>You can choose to export the data as XML or JSON format. You can also specify whether or not the result should be zipped or unzipped. Lastly, if you click check &quot;Export with dependencies&quot;, all dependent meta-data objects which the ones you have selected depend upon, will also be exported. </para>
    </section>
    <section>
      <title>Data export</title>
      <para>To export  raw data from DHIS2, choose &quot;Services-&gt;Import-export-&gt;Data export&quot;. Select the organisation unit(s), the start and end date,  and dataset or data sets for which data export should be selected. Click &quot;Export as XML&quot; to export data as XML and &quot;Export as CSV&quot; to export data in CSV format. </para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata fileref="resources/images/import_export/export_to_dhis2.png" format="PNG"/>
          </imageobject>
        </mediaobject>
      </screenshot>
      <para>A pop-up save option will appear on the displayed screen (see picture below) prompting the saving of the exported data. You may save the export folder on your desktop or any other folder by selecting the ‘Save to Disk’ option from the pop-up prompt.
</para>
    </section>
    <section>
      <title>Event data export</title>
      <para>Event (or tracker) data can be exported by accessing the &quot;Event data export&quot; function by choosing &quot;Services-&gt;Import-export-&gt;Event data export&quot; from the main menu. Choose the organisation unit of interest, along with the Programs and Program stages and start and end dates. The &quot;Inclusion&quot; option has three options.</para>
      <itemizedlist>
        <listitem>
          <para>Selected organisation unit: Export event data only for the selected organisation unit</para>
        </listitem>
        <listitem>
          <para>Include children of organisation unit: Export event data for the children of the organisation unit as well as the selected organisation unit itself.</para>
        </listitem>
        <listitem>
          <para>Include descendants of organisation unit:  Export event data for the descendants  of the organisation unit as well as the selected organisation unit itself.</para>
        </listitem>
      </itemizedlist>
      <para>Event data can be exported either as XML or JSON, and either compressed or uncompressed in a ZIP file. Once you have set all options, press <guibutton>&quot;Export&quot;</guibutton> . The export file will now by downloaded to your local computer. </para>
    </section>
    <section>
      <title>Exporting data to other systems</title>
      <section>
        <title>DHIS 1.4 Meta-data export</title>
        <para>The DHIS 1.4 Meta-data export functionality provides the same functionality as the standard DHIS2 meta-data export, except that the resulting file can be used to transmit meta-data information to DHIS 1.4 systems. </para>
      </section>
      <section>
        <title>DHIS 1.4 Detailed Metadata Export</title>
        <para>The DHIS 1.4 Metadata export functionality provides the same functionality as the detailed DHIS 2 metadata export, except that the resulting file can be used to transmit meta-data information to DHIS 1.4 systems. Simply select the data elements and indicators that you want and click &quot;Export&quot; to begin the export process.</para>
      </section>
      <section>
        <title>PDF Metadata Export</title>
        <para>The PDF export functionality lets you export the meta-data definitions to the Portable
        Document Format (PDF).</para>
      </section>
      <section>
        <title>XLS metadata export</title>
        <para>Meta-data can be exported directly to the XLS format with this function. Currently, it is only possible to export data elements, indicators, organisation units and the organisation unit hierarhcy. </para>
      </section>
    </section>
  </section>
</chapter>
